Техническое задание:

Для пользователя (студента/посетителя) реализовать функционал:
1. Регистрации и авторизации с возможностью восстановления пароля через
электронную почту.
2.Настройки профиля: редактирование личных данных (имя, контактная 
информация), загрузка фотографии, изменение пароля, удаление учетной записи.
3. Просмотр расписания: отображение списка курсов с датами, временем и
доступностью. 
4. Запись на театральные курсы: выбор курса, выбор преподавателя,
выбор типа прохождения (персональное или парное), выбор периода 
прохождения (даты начала и окончания), подтверждение записи.
5. Создание и редактирование портфолио: добавление фотографий,
видеозаписей, текстовых описаний достижений, возможность удаления
или изменения элементов портфолио.
6. Просмотр истории: отображение списка записей на курсы с указанием
статуса (ожидание, подтверждено,завершено). 
7. Оставление отзывов.



Для преподавателя реализовать функционал:
1. Авторизации с использованием учетных данных.
2. Просмотр списка курсов и студентов: отображение информации о своих курсах
и записанных студентах (имя, тип прохождения, даты). 
3. Управление записями студентов: Просмотр заявок на курсы, подтверждение
или отклонение записей.


Для администратора реализовать функционал:
1. Управления базами данных
2. добавление, редактирование и удаление данных о:
2.1. театральных представлениях (название, дата, описание)
2.2. курсах (название, преподаватель, расписание)
2.3. преподавателях (имя, специализация)
2.4. студентах (профильные данные)
3. модерация отзывов.




1. Подготовка рабочего окружения
Создание виртуального окружения и установка зависимостей: Создай виртуальное окружение, активируй его и установи основные пакеты:

bash
python3 -m venv venv
source venv/bin/activate
pip install flask flask-login flask-mail flask-wtf sqlalchemy flask-migrate itsdangerous


Сохраняй зависимости в файле requirements.txt, чтобы в будущем было удобно восстановить среду разработки.

2. Структурирование проекта
Определи структуру директорий, чтобы логически распределить функциональные блоки. Например:

/my_flask_app
├── app/
│   ├── __init__.py        # Инициализация приложения и подключение расширений
│   ├── config.py          # Конфигурация (SECRET_KEY, параметры БД, настройки Flask-Mail и др.)
│   ├── models.py          # Определение моделей (User, Course, Registration, PortfolioItem, Review, TheatreShow и т.д.)
│   ├── forms.py           # Формы (регистрация, логин, изменение профиля, запись на курс и проч.)
│   ├── email.py           # Логика формирования и отправки email (подтверждение регистрации, восстановление пароля)
│   ├── student/           # Blueprint для функционала студентов/посетителей
│   │   ├── routes.py      # Маршруты (регистрация, профиль, расписание, запись на курсы, портфолио, история, отзывы)
│   │   └── __init__.py
│   ├── teacher/           # Blueprint для функционала преподавателя
│   │   ├── routes.py      # Маршруты (просмотр курсов, список студентов, управление записями студентов)
│   │   └── __init__.py
│   └── admin/             # Blueprint для административного функционала
│       ├── routes.py      # Маршруты (управление данными о представлениях, курсах, преподавателях, студентах; модуляция отзывов)
│       └── __init__.py
├── migrations/            # Миграции базы данных (при использовании Flask-Migrate)
└── run.py                 # Точка входа для запуска приложения
Такое разбиение позволяет масштабировать систему, а также разделить обработку специфичных маршрутов по ролям.

3. Проектирование базы данных и моделей
Основные сущности
User: Базовая модель для всех пользователей. Поле role позволит разграничивать студентов, преподавателей и администраторов. Дополнительные атрибуты: email, password_hash, а также персональные данные (имя, контакты). Методы установки/проверки пароля, а также генерация токенов для восстановления пароля через itsdangerous.

Course: Информация о курсах: название, расписание (даты, время), преподаватель, доступность и т.д.

Registration: Модель, отражающая запись студента на курс. Содержит поля типа прохождения (персональное или парное), выбранные даты (начало, окончание), статус (ожидание, подтверждено, завершено).

PortfolioItem: Элементы портфолио для студента: изображения, видео, текстовые описания достижений.

Review: Отзывы, оставленные студентами, с возможностью модерации.

TheatreShow: Для администратора: сведения о театральных представлениях (название, дата, описание).

Связи между моделями
Связь между пользователями и регистрациями: один студент может иметь множество заявок.

Связь между курсами и регистрациями: один курс может иметь множество записей (наверное, с различными статусами).

Если преподаватель — это разновидность пользователя, то к модели Course можно привязать преподавателя через внешний ключ, либо создать отдельную модель для преподавателей.

Используй Flask-Migrate для управления миграциями и внесения изменений в схему данных.

4. Функционал для студента/посетителя
4.1. Регистрация, авторизация и восстановление пароля
Регистрация:

Создай форму регистрации (email, пароль, подтверждение пароля).

Процесс регистрации: валидация данных, хэширование пароля, сохранение в БД и уведомление.

Авторизация:

Реализуй форму входа (email и пароль) с использованием Flask-Login.

Настрой user_loader для загрузки пользователя по ID.

Восстановление пароля:

Форма для ввода email.

Генерация одноразового токена (itsdangerous) и отправка email с ссылкой для восстановления.

Маршрут для проверки токена и ввода нового пароля.

4.2. Настройки профиля
Редактирование личных данных: Форма для изменения имени, контактной информации.

Загрузка фотографии профиля: Реализуй обработку загрузки файлов (Flask-Uploads или встроенные возможности werkzeug).

Изменение пароля и удаление аккаунта: Формы для смены пароля, с подтверждением текущего пароля, и, при необходимости, процедуру подтверждения удаления аккаунта.

4.3. Просмотр расписания и запись на курсы
Просмотр расписания:

Организуй страницу, где отображается список курсов с датами, временем и доступностью, используя данные из модели Course.

Запись на курсы:

Форма для выбора курса, преподавателя, типа прохождения (персональное/парное) и периода (начало и конец).

Сохранение заявки в модели Registration, проставление статуса (например, "ожидание").

4.4. Создание и редактирование портфолио
Портфолио:

Возможность добавления, редактирования, удаления элементов портфолио (фото, видео, текст).

Создай модель PortfolioItem, связанную с пользователем.

4.5. Просмотр истории и отзывы
История записей:

Отображение всех заявок на курсы с текущим статусом (ожидание, подтверждено, завершено).

Оставление отзывов:

Форма для отправки отзыва, сохранение отзыва в модели Review с возможностью последующей модерации.

5. Функционал для преподавателя
5.1. Авторизация
Используй общую систему логина, но с проверкой роли (преподаватель) для доступа к специфичным маршрутам.

5.2. Просмотр списка курсов и студентов
Dashboard преподавателя:

Отобрази список курсов, за которые отвечает преподаватель.

Для каждого курса организуй просмотр записанных студентов: Имя, тип прохождения, даты занятий.

5.3. Управление записями студентов
Обеспечь возможность просмотра заявок на курсы.

Реализуй функции подтверждения или отклонения записей, обновляя статус заявки в модели Registration.

6. Функционал для администратора
6.1. Авторизация и доступ
Ограничь доступ к административному разделу с помощью проверки роли пользователя (администратор).

6.2. Управление базами данных
CRUD для основных данных:

Театральные представления: добавление, редактирование, удаление (название, дата, описание).

Курсы: управление данными о курсах (название, преподаватель, расписание).

Преподаватели: управление информацией (имя, специализация).

Студенты: модификация профильных данных.

6.3. Модерация отзывов
Организуй интерфейс для просмотра отзывов, с возможностью их модерации (удаление или редактирование, подтверждение публикации).

7. Безопасность и управление ролями
Система ролей:

Добавь в модель User поле role (например: "student", "teacher", "admin") для разделения доступа.

Реализуй декораторы или middleware для проверки ролей на уровне маршрутов.

Обработка ошибок и уведомления:

Внедри систему flash-сообщений для информирования пользователя о результате операций.

Обработай возможные ошибки (например, неверный токен, отсутствие нужных данных в форме) с информативными сообщениями.

8. Тестирование и деплой
Локальное тестирование:

Напиши модульные и интеграционные тесты для проверки корректного выполнения всех маршрутов и функций.

Документация:

Документируй код и процесс установки.

Используй Flask’s debug-режим для выявления и исправления ошибок.

Подготовка к деплою:

Настраивай production-сервер (например, с помощью Gunicorn и Nginx), учитывай аспекты безопасности (SSL, защита от CSRF).

Дополнительные улучшения
Уведомления: Добавление email-уведомлений о подтверждении записи, изменениях статуса заявок и обновлениях курсов.

Многофакторная аутентификация (MFA): На следующем этапе можно добавить дополнительный уровень безопасности для преподавателей и администраторов.

Интерфейс: Разработка удобного и адаптивного пользовательского интерфейса с использованием шаблонов Jinja2.
